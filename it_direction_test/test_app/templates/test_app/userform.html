{% extends 'test_app/base.html' %}

{% block title %}GASYR Foundation School Form{% endblock %}

{% block content %}
{% load static %}
<link href="https://fonts.googleapis.com/css?family=Qanelas:400,700" rel="stylesheet">

<style>
    body, input, button, select, label {
        font-family: 'Qanelas', Arial, sans-serif;
    }
    body {
        background: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .form-container {
        background: white;
        padding: 30px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
        border-radius: 5px;
        max-width: 580px;
        min-width: 300px;
        border: 1px solid #ddd;
        position: relative;
        height: 681px;
    }
    .form-header {
        text-align: left;
        margin-bottom: 30px;
    }
    .form-header h1 {
        font-size: 22px;
        margin: 0;
    }
    .language-selection {
        display: flex;
        justify-content: start;
        gap: 10px;
    }
    .language-option {
        height: 30px;
        width: 45%;
        padding: 10px 10px;
        margin: 0;
        border: 1px solid transparent;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }
    .language-option:hover, .language-option.active {
        background-color: #d9534f;
        color: white;
        border-color: #d9534f;
    }
    .language-option input[type="radio"] {
        display: none;
    }
    .form-group {
        margin-bottom: 25px;
    }
    label {
        display: block;
        margin-bottom: 5px;
        color: #333;
        font-weight: bold;
    }
    input[type=text], input[type=tel], input[type=email], select, button {
        width: 100%;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    button {
        background: #d9534f;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
        border-radius: 4px;
    }
    button:hover {
        background: #c9302c;
    }
</style>

<div class="logo" style="width: 190px; height: 190px;">
    <img src="{% static 'test_app/images/logo2.svg' %}" alt="Logo" style="width: 100%; height: 100%;">
</div>


<div class="form-container">
    <form method="post">
        {% csrf_token %}
        <div class="form-header">
                            <label for="id_first_name">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫</label>

            <div class="language-selection">
                <label class="language-option">
                    <input type="radio" name="language" value="RU" id="language_ru" hidden checked>
                    <span>üá∑üá∫ –†—É—Å—Å–∫–∏–π</span>
                </label>
                <label class="language-option">
                    <input type="radio" name="language" value="KZ" id="language_kz" hidden>
                    <span>üá∞üáø “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ</span>
                </label>
            </div>
        </div>
        <div class="form-group">
            <label for="id_first_name">–ò–º—è</label>
            <input type="text" placeholder="–ì–∞—Å—ã—Ä" name="first_name" id="id_first_name" required>
        </div>
        <div class="form-group">
            <label for="id_last_name">–§–∞–º–∏–ª–∏—è</label>
            <input type="text" placeholder="–Ø–∫—É–±–æ–≤–∏—á" name="last_name" id="id_last_name" required>
        </div>
        <div class="form-group">
            <label for="id_phone_number">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
            <input type="tel" placeholder="+7 ( ___ ) ____ - __ - __" name="phone_number" id="id_phone_number" required>
            <input type="hidden" name="raw_phone_number" id="id_raw_phone_number">
        </div>
        <div class="form-group">
            <label for="id_email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
            <input type="email" placeholder="gasyr@gmail.com" name="email" id="id_email" required>
        </div>
        <button type="submit">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
    </form>
</div>

<script>
document.getElementById('id_phone_number').addEventListener('input', function (e) {
    var input = e.target.value.replace(/[^\d]/g, ''); // Remove all non-numeric characters

    // Ensure the input starts with '7' (the country code for Kazakhstan)
    if (!input.startsWith('7')) {
        input = '7' + input;
    }

    // Limit the length to 11 digits (including the country code '7')
    input = input.substring(0, 11);

    var formattedInput = '+7 ('; // Start with the country code and opening parenthesis

    // Remove the country code ('7') and then format the rest
    input = input.substring(1); // Remove the '7' to start formatting

    // Dynamically add formatting based on the current length of the input
    for (var i = 0; i < input.length; i++) {
        if (i === 3) {
            formattedInput += ') '; // Close the parenthesis after the area code
        } else if (i === 6 || i === 8) {
            formattedInput += ' - '; // Add dashes after the 6th and 8th digits
        }
        formattedInput += input[i];
    }

    // Update the input field with the dynamically formatted value
    e.target.value = formattedInput;
});

  // Your existing code for language selection
  document.querySelectorAll('.language-option').forEach(option => {
    option.addEventListener('click', () => {
      document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
      option.classList.add('active');
    });
  });
</script>



{% endblock %}
